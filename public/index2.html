<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Pragma" content="no-cache">

    <title>Matematica interattiva</title>

    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    
    <!-- Our Custom CSS -->
    <link rel="stylesheet" href="./css/indexStyle.css">
    <link rel="stylesheet" href="./css/mioStyle.css">
    
    <!--JQUERY-->
    <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    


    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML'></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]}
        });
      </script>

      
      <!--Animate Link-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">


    
    
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>

   

    <!--Taggle Button-->
    <link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.5.0/css/bootstrap4-toggle.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.5.0/js/bootstrap4-toggle.min.js"></script>


     
</head>

<body>

    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">

            <div class="sidebar-header" id="sidebarCollapse">
                    <h3>UNIRSM</h3>
            </div>
            
           

      
        </div>
    </nav>
        


    <div class="wrapper">

            

        <!-- Sidebar  -->
        <nav id="sidebar">
         

            <ul class="list-unstyled components">
                
                <li>
                    <a href="#disequazioni" class="argomento" data-argomento="disequazioni" data-toggle="collapse">Disequazioni</a>
                    <div id="disequazioni" class="collapse" >

                            <ul class="list-unstyled ">
                                    <li class="">
                                        <a href="#" class="campo" data-campo="teoria">Teoria</a>
                                    </li>
                                    <li class="">
                                        <a href="#" class="campo" data-campo="esercizi">Esercizi</a>
                                    </li>
                                    <li>
                                        <a href="#" class="campo" data-campo="verofalso">Vero o Falso</a>
                                    </li>
                                    <li class="">
                                        <a href="#" class="campo" data-campo="multipla">Risposta Multipla</a>
                                    </li>
                                    <li class="">
                                            <a href="#" class="campo" data-campo="multipla">Grafici</a>
                                    </li>
                                </ul>

                    </div>
                </li>
                <li>
                    <a href="#topologia" class="argomento" data-argomento="topologia" data-toggle="collapse">Topologia</a>
                    <div id="topologia" class="collapse">

                            <ul class="list-unstyled ">
                                    <li class="">
                                        <a href="#" class="campo" data-campo="teoria">Teoria</a>
                                    </li>
                                    <li class="">
                                        <a href="#" class="campo" data-campo="esercizi">Esercizi</a>
                                    </li>
                                    <li>
                                        <a href="#" class="campo" data-campo="verofalso">Vero o Falso</a>
                                    </li>
                                    <li class="">
                                        <a href="#" class="campo" data-campo="multipla">Risposta Multipla</a>
                                    </li>
                                    <li class="">
                                            <a href="#" class="campo" data-campo="multipla">Grafici</a>
                                    </li>
                                </ul>
                            </div>
                </li>
                <li>
                    <a href="#funzioni" class="argomento" data-argomento="funzioni" 
                    data-toggle="collapse">Funzioni</a>
                    <div id="funzioni" class="collapse">

                            <ul class="list-unstyled ">
                                    <li class="">
                                        <a href="#" class="campo" data-campo="teoria">Teoria</a>
                                    </li>
                                    <li class="">
                                        <a href="#" class="campo" data-campo="esercizi">Esercizi</a>
                                    </li>
                                    <li>
                                        <a href="#" class="campo" data-campo="verofalso">Vero o Falso</a>
                                    </li>
                                    <li class="">
                                        <a href="#" class="campo" data-campo="multipla">Risposta Multipla</a>
                                    </li>
                                    <li class="">
                                            <a href="#" class="campo" data-campo="multipla">Grafici</a>
                                    </li>
                                </ul>
                            </div>
                    
                </li>
                <li>
                    <a href="#equivalenze" class="argomento" data-argomento="equivalenze"
                     data-toggle="collapse">Equivalenze </a>
                    <div id="equivalenze" class="collapse">

                            <ul class="list-unstyled ">
                                    <li class="">
                                        <a href="#" class="campo" data-campo="teoria">Teoria</a>
                                    </li>
                                    <li class="">
                                        <a href="#" class="campo" data-campo="esercizi">Esercizi</a>
                                    </li>
                                    <li>
                                        <a href="#" class="campo" data-campo="verofalso">Vero o Falso</a>
                                    </li>
                                    <li class="">
                                        <a href="#" class="campo" data-campo="multipla">Risposta Multipla</a>
                                    </li>
                                    <li class="">
                                            <a href="#" class="campo" data-campo="multipla">Grafici</a>
                                    </li>
                                </ul>
                            </div>
                </li>
                <li>
                    <a href="#limiti" class="argomento" data-argomento="limiti"
                     data-toggle="collapse">Limiti</a>
                    <div id="limiti" class="collapse">

                            <ul class="list-unstyled ">
                                    <li class="">
                                        <a href="#" class="campo" data-campo="teoria">Teoria</a>
                                    </li>
                                    <li class="">
                                        <a href="#" class="campo" data-campo="esercizi">Esercizi</a>
                                    </li>
                                    <li>
                                        <a href="#" class="campo" data-campo="verofalso">Vero o Falso</a>
                                    </li>
                                    <li class="">
                                        <a href="#" class="campo" data-campo="multipla">Risposta Multipla</a>
                                    </li>
                                    <li class="">
                                            <a href="#" class="campo" data-campo="multipla">Grafici</a>
                                    </li>
                                </ul>
                            </div>
                    
                </li>
                <li>
                    <a href="#derivate" class="argomento" data-argomento="derivate" data-toggle="collapse">Derivate</a>
                    <div id="derivate" class="collapse">

                            <ul class="list-unstyled ">
                                    <li class="">
                                        <a href="#" class="campo" data-campo="teoria">Teoria</a>
                                    </li>
                                    <li class="">
                                        <a href="#" class="campo" data-campo="esercizi">Esercizi</a>
                                    </li>
                                    <li>
                                        <a href="#" class="campo" data-campo="verofalso">Vero o Falso</a>
                                    </li>
                                    <li class="">
                                        <a href="#" class="campo" data-campo="multipla">Risposta Multipla</a>
                                    </li>
                                    <li class="">
                                            <a href="#" class="campo" data-campo="multipla">Grafici</a>
                                    </li>
                                </ul>
                            </div>
                </li>
                <li>
                    <a href="#integrali" class="argomento" data-argomento="integrali" data-toggle="collapse">Integrali</a>
                    <div id="integrali" class="collapse">

                            <ul class="list-unstyled ">
                                    <li class="">
                                        <a href="#" class="campo" data-campo="teoria">Teoria</a>
                                    </li>
                                    <li class="">
                                        <a href="#" class="campo" data-campo="esercizi">Esercizi</a>
                                    </li>
                                    <li>
                                        <a href="#" class="campo" data-campo="verofalso">Vero o Falso</a>
                                    </li>
                                    <li class="">
                                        <a href="#" class="campo" data-campo="multipla">Risposta Multipla</a>
                                    </li>
                                    <li class="">
                                            <a href="#" class="campo" data-campo="multipla">Grafici</a>
                                    </li>
                                </ul>
                            </div>
                    
                </li>

            </ul>

            
        </nav>




        <script>
       
  
        $('.campo').on('click',function(){
            $('.attivo').removeClass('attivo');

            $(this).addClass('attivo');

            
            datiUtili.campo=$(this).data('campo');
            datiUtili.argomento= $(this).closest('div').attr('id');

            let sendData={

                campo:datiUtili.campo,
                argomento:datiUtili.argomento

            };
            
            // cancellare tutti i contenuti di
            switch (sendData.campo){
                case "teoria":
                    //cosa deve fare
                    
           
                    
                    break;
                case "verofalso":
                    
                    break;
                case "multipla":
                    
                    break;
                default:
                    break;
            }

                     

            // Messaggio


            
            options={
                    method:'POST',
                    headers:{
                        'Content-Type':'application/json'
                        },
                    body:JSON.stringify(sendData)
                }

                fetch('/dammidati',options).then((data)=>{                   
                                return data.json();
                                        }
                    ).then((queryresult)=>{

                        // switch case
                        console.log(queryresult);
                        datiUtili.datiMostrati=queryresult;

                        datiUtili.datiMostrati.sort((a,b)=>{
                             return a.indice-b.indice;
                         });
                        

                        //prima Svuoto
                        $('#ulDomande').empty();
                        // da qui perche sono le domande di teoria
                        datiUtili.datiMostrati.map(
                            (ele,i)=>{
                                visualizza(ele);
                               
                        });
                        
                    });
        });


        // servir√† la funczione visulizza!!!
         
        function visualizza(ele){
            //capisco qualle argomento
           
                 switch (ele.campo){

                    case "teoria":

                    let li=$('<li class="list-group-item visualizzatore" id="'+ele._id+'"></li>');
                             

                                    let card=$('<div class="card">\
                                                <div class="card-body">'+ele.strutturaDato.testo+'</div> \
                                                </div>');

                                    

                                li.append(card);

                                $('#ulDomande').append(li);


                        break;
                    case "verofalso":
                        
                        let livf=$('<li class="list-group-item visualizzatore" id="'+ele._id+'"></li>').
                        append(stampaVF(ele.strutturaDato.testo,ele.strutturaDato.risposta,ele._id));

                        $('#ulDomande').append(livf);

                        break;
                    case 'multipla':
                        
                         if (ele.tipo=="semplice"){
                             let limult=$('<li class="list-group-item visualizzatore" id="'+ele._id+'"></li>').
                             append(stampaMultipla(ele.strutturaDato.testo,ele.strutturaDato.risposta,ele._id));

                             $('#ulDomande').append(limult);

                         }

                         if (ele.tipo=="testo"){
                             let litesto=$('<li class="list-group-item visualizzatore" id="'+ele._id+'"></li>').
                             append(stampaTesttoMultipla(ele.strutturaDato.testo,ele.strutturaDato.risposta,ele._id));

                             $('#ulDomande').append(litesto);                            
                         }


                         if (ele.tipo=="sort"){
                             let lisort=$('<li class="list-group-item visualizzatore" id="'+ele._id+'"></li>').
                             append(stampaSort(ele.strutturaDato.testo,ele.strutturaDato.risposta,ele._id));

                             $('#ulDomande').append(lisort);  
                             
                             new Sortable(document.getElementById('sort1_'+ele._id), {
                                            animation: 150,
                                             ghostClass: 'blue-background-class'
                                            });
                            new Sortable(document.getElementById('sort2_'+ele._id), {
                                            animation: 150,
                                             ghostClass: 'blue-background-class'
                                            });

                         }
                                            
                    break;
                }
                let sir=document.getElementById(ele._id);
                                
                MathJax.Hub.Queue(["Typeset",MathJax.Hub,sir]);
            
            

        }


        
        </script>



        <!-- Page Content  -->
        <div id="content">

                <div id="particles-js"></div>

                <script src="./js/particles.js"></script>
                <script src="./js/app.js"> </script>
                
                
               
                    

                
             <!--Script VeroFalso-->
                    <script>
                        function stampaVF(testo,ris,_id){
                            return '<div class="card text-center card3d">\
                                        <div class="card-body">\
                                            <p class="card-text">'+testo+'</p>\
                                            <a href="#" class="btn btn-outline-primary btn-lg buttonRisp"\
                                            onclick="verificaRisposta(event,this,true)" name="'+_id+'" data-risp="'+ris+'">Vero</a>\
                                            <a href="#" class="btn btn-outline-primary btn-lg buttonRisp"\
                                            onclick="verificaRisposta(event,this,false)" name="'+_id+'" data-risp="'+ris+'">Falso</a>\
                                        </div>\
                                      </div>'
                        }

                        

                        

                        function verificaRisposta(event,el,valore){

                                            let rif=$(el).data('risp');
                                            //se ho indovinato la risposta
                                            let elements=$('.buttonRisp[name="'+$(el).attr("name")+'"]');
                                            
                                            if (rif){
                                            
                                                if(valore==rif){                
                                                
                                                    $(el).addClass('disabled').removeClass('btn-outline-primary')
                                                        .addClass('btn-success animated rubberBand');
                                                


                                                  $(elements[1]).addClass('disabled').removeClass('btn-outline-primary')
                                                    .addClass('btn-outline-danger');
                                                    audioSuccess.play();
                                                
                                                    }else{
                                                    
                                                    
                                                    $(el).addClass('disabled').removeClass('btn-outline-primary')
                                                    .addClass('btn-danger animated shake');
                                                    
                                                    $(elements[0]).addClass('disabled').removeClass('btn-outline-primary')
                                                    .addClass('btn-outline-success ');
                                                    
                                                    audioIncorrect.play();
                                                    }
                                            }else{

                                                if(valore==rif){                
                                                
                                                    $(el).addClass('disabled').removeClass('btn-outline-primary')
                                                    .addClass('btn-success animated rubberBand');
                                                
                                                    $(elements[0]).addClass('disabled').removeClass('btn-outline-primary')
                                                    .addClass('btn-outline-danger');
                                                
                                                    audioSuccess.play();
                                                }else{
                                                
                                                    $(el).addClass('disabled').removeClass('btn-outline-primary')
                                                    .addClass('btn-danger animated shake');
                                                
                                                    $(elements[1]).addClass('disabled').removeClass('btn-outline-primary')
                                                    .addClass('btn-outline-success');
                                                
                                                    audioIncorrect.play();
                                                
                                            }

                                            }
                                            event.preventDefault();
                         }

                    
                    </script>
                    
                            <script>
                                function stampaTesttoMultipla(testobase,arrRisposte,_id){

                                    let testo='<div class="card card3d">\
                                                <div class="card-body">\
                                                 \<h5 class="card-title">'+testobase+'</h5>\
                                                    <p class="card-text">';

                                     for (let risp of arrRisposte){
                                         switch (risp.valore){
                                             case "nullo":
                                                 testo+=risp.testo+" ";
                                                 break;
                                            case "giusto":
                                                testo+='<span class="partiDiTesto" data-valore="true" name="'+_id+'" onclick="trovaRispostaDomandaTesto(event,this)">'+risp.testo+' </span>';
                                                break;
                                            case "sbagliato":
                                                testo+='<span class="partiDiTesto" data-valore="false" name="'+_id+'" onclick="trovaRispostaDomandaTesto(event,this)">'+risp.testo+' </span>';
                                                break;

                                         }
                                     }                   
                                     testo+='<p></div> </div>';
                                    return testo;

                                }

                                function trovaRispostaDomandaTesto(event,element){

                                            if($(element).data('valore')==true){
                                                 audioSuccess.play();
                                             }else{
                                                 audioIncorrect.play();
                                             }
                                             let id=$(element).attr('name');

                                             $('.partiDiTesto[name='+id+']').map(
                                                 (index, ele)=>{
                                                     if ($(ele).data('valore')==true){
                                                         $(ele).addClass('corretta');    
                                                     }else{
                                                         $(ele).addClass('nonCorretta');
                                                     }

                                                     $(ele).removeClass('partiDiTesto').attr('onclick',null);

                                                 }
                                             );

                                }


                               

                            </script>

                            
                        <script>

                         let coloriSort=["list-group-item-success", 'list-group-item-secondary', 'list-group-item-info', 'list-group-item-warning', 'list-group-item-danger', 'list-group-item-primary'];

                         function stampaSort(testo,arrRisp,_id){

                             let text='    <div class="card text-center card3d" style="padding:5%">\
                                                 <p id="sortDomandaTesto">'+testo+'</p>\
                                                 <div class="row align-items-center">\
                                                         <ul class="list-group col-6" id="sort1_'+_id+'">';
                                                        
                                                        arrRisp.map((ele,ind)=>{
                                                            
                                                            text+= '<li class="list-group-item sortdom" data-index="'+ind+'" name="'+_id+'">'+ele.domanda+'</li>';
                                                        });
                                                                 
                                                        text+='</ul>\
                                                          <ul class="list-group col-6" id="sort2_'+_id+'">';
                                                        
                                                        arrRisp.map((ele,ind)=>{
                                                            text+= '<li class="list-group-item sortrisp" data-index="'+ind+'" name="'+_id+'">'+ele.risposta+'</li>';
                                                        });
                                                        text+='</ul>\
                                                        <button class="btn btn-success" onclick="confrontasort(event,this)" name="'+_id+'">Confronta</button><div>';

                        return text;

                                                        
                         }

                         function confrontasort(event,item){
                             audioSuccess.play();
                             let name=$(item).attr('name');
                             let domande=$('.sortdom[name="'+name+'"]');
                             let risposte=$('.sortrisp[name="'+name+'"]');
                             for (let i=0;i<domande.length;i++){
                                 if($(domande[i]).data('index')==$(risposte[i]).data('index')){
                                    let index=$(domande[i]).data('index');
                                    
                                    let colore=coloriSort[index];
                                    $(domande[i]).addClass(colore);
                                    $(risposte[i]).addClass(colore);
                                 }
                             }
                             
                         }

                        
                        </script>        


                        <!--Script Multiplo-->
                    <script>
                        
                        


                        

                        function stampaMultipla(testo,arrayRisposte,_id){
                            
                            let stringa=[
                                 '<li class="list-group-item justify-content-between align-items-center senzaBordi" id="'+_id+'">',
                                     ,'<div class="card card3d" >',
                                         '<div class="card-body">',
                                             '<p class="card-text">'+testo+'.</p>',
                                         '</div>',
                                         '<ul class="list-group" >'];
                                            arrayRisposte.map((el,index)=>{
                                                stringa.push('   <a href="#" name="'+_id+'" class="list-group-item list-group-item-action" data-valore="'+el.valore+'" onclick="controlloRispostaMultipla(event,this)">'+el.testo+'</a>');
                                         });
                                     stringa.push('</ul> </div>');
                                
                                return stringa.join('');

                        }
                        
                        function controlloRispostaMultipla(event,ele){
                            let nome=$(ele).attr('name');


                            //cerco tutti i bottoni e gli ca
                            $('.list-group-item-action[name="'+nome+'"]').map((index,item)=>{

                                if ($(item).data('valore')==true){
                                    $(item).css('border','1px solid #28a745').css('color','#28a745');
                                
                                }else{
                                    $(item).css('border','1px solid #dc3545').css('color','#dc3545');
                                }
                                
                            });
                                
                            $('.list-group-item-action[name="'+nome+'"]').attr('onclick','').unbind('click');
                                
                            if ($(ele).data('valore')==true){
                                
                                $(ele).addClass('list-group-item-success').css('color','white');
                                audioSuccess.play();
                                }else{
                                $(ele).addClass('list-group-item-danger').css('color','white');
                                audioIncorrect.play();
                                
                            }
                            


                            event.preventDefault();
                        }
                    </script>

              

             <!--area di test-->
             <div id="anteprima"></div>

             <div>
                    <ul class="list-group " id="ulDomande">

                    </ul>
                          
             </div>

             

            
        </div>
    </div>
    

    <!-- Popper.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

    <script type="text/javascript">
        
        let datiUtili={};



        const audioSuccess=new Audio('../sound/successSE.mp3');
        const audioIncorrect=new Audio('../sound/incorrectSE.mp3');
        audioIncorrect.volume=0.2;

        




        $(document).ready(function () {
            $('#sidebarCollapse').on('click', function () {
                $('#sidebar').toggleClass('active');
            });

                
        });
    </script>
    
    
           
</body>

</html>




<!--
<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
    $(document).ready(function(){
  
    options={
        method:'POST',
        headers:{
            'Content-Type':'application/json'
        },
        body:JSON.stringify({ciao:'ciao'})
    }

    fetch('/api',options).then((data)=>{
        return data.json();
        console.log(response.json());
    }
    ).then((queryresult)=>{
        console.log(queryresult);

        const pods = queryresult.pods;
        const output = pods.map((pod) => {
        const subpodContent = pod.subpods.map(subpod =>
            `  <img src="${subpod.img.src}" alt="${subpod.img.alt}">`
            ).join('\n');
            return `<h2>${pod.title}</h2>\n${subpodContent}`;
  }).join('\n');
   $('body').append(output);
  //console.log(output);
    });
    
});
</script>
</head>
<body>

<h2>This is a heading</h2>

<p>This is a paragraph.</p>
<p>This is another paragraph.</p>


</body>
</html>





//visualizza elemento di testo

 /*
                               let li=$('<li class="list-group-item visualizzatore" id="'+ele._id+'"></li>');
                             

                                    let card=$('<div class="card">\
                                                <div class="card-body">'+ele.strutturaDato.testo+'</div> \
                                                <div class="card-footer">\
                                                    <button type="button" class="btn btn-outline-primary" data-target="'+ele._id+'">Modifica</button>\
                                                    <button type="button" class="btn btn-outline-danger" data-target="'+ele._id+'">Cancella</button>\
                                                </div>\
                                                </div>');

                                    

                                li.append(card);

                                $('#ulDomande').prepend(li);*/


-->